{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Patients List</title>
    <link rel="stylesheet" href="{% static 'css/patient_list.css' %}" />
    <!-- <link rel="stylesheet" href="{% static 'css/sidder_part.css' %}" /> -->
  </head>
  <body>
    {% include 'sidder_part.html' %}

    <div class="main-content">
      <!-- Header -->
      <header>
        <h1>Patients</h1>
        <div class="user-info">
          <span>Welcome, {{ request.user.username }}</span>
          <a href="{% url 'logout' %}" class="logout-btn">Logout</a>
        </div>
      </header>

      <!-- Patient Table -->
      <section class="table-section">
        <h2>All Patients</h2>
        <input
          type="text"
          id="searchInput"
          placeholder="Search patients..."
          onkeyup="filterPatients()"
        />

        <table id="patientsTable">
          <thead>
            <tr>
              <th>ID</th>
              <th>Full Name</th>
              <th>Username</th>
              <th>Email</th>
              <th>Phone</th>
              <th>Age</th>
              <th>Gender</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            {% for patient in patients %}
            <tr>
              <td>{{ patient.id }}</td>
              <td>{{ patient.full_name }}</td>
              <td>{{ patient.username }}</td>
              <td>{{ patient.email }}</td>
              <td>{{ patient.phone }}</td>
              <td>{{ patient.age }}</td>
              <td>{{ patient.gender }}</td>
              <td>
                <!-- View profile -->
                <a
                  href="{% url 'custom_admin:patient_profile' patient.id %}"
                  class="btn-view"
                >
                  View Profile
                </a>

                <!-- Add/Edit doctor opinion -->
                <a
                  href="{% url 'custom_admin:update_doctor_opinion' patient.id %}"
                >
                  Add/Edit Doctor Opinion
                </a>
              </td>
            </tr>
            {% empty %}
            <tr>
              <td colspan="8" class="no-data">No patients found.</td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </section>
    </div>

    <script src="{% static 'js/patient_list.js' %}"></script>
  </body>
</html>
